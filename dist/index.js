!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.bionic=e():t.bionic=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();e.FlaggedItem=function(){function t(e,n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceId=e,this.content=n,this.user=o,this.parent=r,this._data=Object.create(null)}return i(t,[{key:"addToContext",value:function(t,e){-1!==["boolean","string","number"].indexOf(void 0===e?"undefined":r(e))?Object.keys(this._data.context).length>=10?console.error("context must not have more than 10 attributes. '"+t+"' key not added"):this._data.context[t]=e:console.error("value in context must be a string, number, or boolean. "+(void 0===e?"undefined":r(e))+" not allowed")}},{key:"resetContext",value:function(){delete this._data.context}},{key:"removeFromContext",value:function(t){void 0!==this._data.context[t]?delete this._data.context[t]:console.info(t+" does not exist in context")}},{key:"precleanData",value:function(t){var e=this,n={},o=Object.keys(t);return 0===o.length?t:(o.forEach(function(o){"object"===r(t[o])?n[o]=e.precleanData(t[o]):void 0!==t[o]&&(n[o]=t[o])}),n)}},{key:"data",get:function(){return this.precleanData(this._data)}},{key:"sourceId",set:function(t){this._data=o({},this._data,{source_id:t})}},{key:"content",set:function(t){var e=t.id,n=t.contentType,r=t.content,i=t.timestamp;this._data=o({},this._data,{content:{id:e,content_type:n,content:r,timestamp:i}})}},{key:"parent",set:function(t){var e=t.id,n=t.contentType,r=t.content,i=t.link;this._data=o({},this._data,{parent:{id:e,content_type:n,content:r,link:i}})}},{key:"user",set:function(t){var e=t.id,n=t.name,r=t.email,i=t.avatar;this._data=o({},this._data,{user:{id:e,name:n,email:r,avatar:i}})}},{key:"context",get:function(){return this._data.context}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(0);var a=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseContext=n,this.options=r({clientId:e},o)}return i(t,[{key:"addToBaseContext",value:function(t,e){-1!==["boolean","string","number"].indexOf(void 0===e?"undefined":o(e))?Object.keys(this._baseContext).length>=10?console.error("context must not have more than 10 attributes. '"+t+"' key not added"):this._baseContext[t]=e:console.error("value in context must be a string, number, or boolean. "+(void 0===e?"undefined":o(e))+" not allowed")}},{key:"resetBaseContext",value:function(){this._baseContext={}}},{key:"removeFromBaseContext",value:function(t){void 0!==this._baseContext[t]?delete this._baseContext[t]:console.info(t+" does not exist in context")}},{key:"_flag",value:function(t,e,n){var o=r({},t,{report:e});return this._requester.postJSON(this.settings.endpoint,o,n)}},{key:"flagSync",value:function(t,e,n){return this._flag(t,e,n)}},{key:"flag",value:function(t,e){var n=this;return new Promise(function(o,r){n._flag(t,e,function(t){t?r(t):o()})})}},{key:"options",set:function(t){var e=t.debug,n=t.clientId,o=t.endpoint,r=void 0===o?"https://stream.bionic-app.com/flags":o;this._options={debug:e,clientId:n,endpoint:r}},get:function(){return this._options}},{key:"baseContext",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(t).length>10)console.error("context must not have more than 10 attributes");else for(var e in t)this.addToContext(e,t[e])},get:function(){return this._baseContext}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=void 0;var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};e.initialize=i.default}])});