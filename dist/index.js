!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.bionic=e():t.bionic=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=Object.create(null),this.context=e}return r(t,[{key:"addToContext",value:function(t,e){-1!==["boolean","string","number"].indexOf(void 0===e?"undefined":o(e))?this._context&&Object.keys(this._context).length>=10?console.error("context must not have more than 10 attributes. '"+t+"' key not added"):this._context[t]=e:console.error("value in context must be a string, number, or boolean. "+(void 0===e?"undefined":o(e))+" not allowed")}},{key:"resetContext",value:function(){delete this._context}},{key:"removeFromContext",value:function(t){void 0!==this._context[t]?delete this._context[t]:console.info(t+" does not exist in context")}},{key:"context",get:function(){return this._context},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(t).length>10)console.error("context must not have more than 10 attributes");else for(var e in t)this.addToContext(e,t[e])}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.precleanData=function t(e){var n={},r=Object.keys(e);return 0===r.length?e:(r.forEach(function(r){"object"===o(e[r])?0!==Object.keys(e[r]).length&&(n[r]=t(e[r]),0===Object.keys(n[r]).length&&delete n[r]):void 0!==e[r]&&(n[r]=e[r])}),n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=n(1),c=n(0),s=(o=c)&&o.__esModule?o:{default:o};var f=function(t){function e(t,n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.user=t,i.comments=n,i.tags=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),u(e,[{key:"addToTags",value:function(t){this._tags.length>5&&console.error("cannot exceed 5 tags"),"string"==typeof t?this._tags.push(t):console.error("values in tags must be strings. "+(void 0===t?"undefined":i(t))+" not allowed")}},{key:"removeFromTags",value:function(t){var e=this._tags.indexOf(t);-1!==e?this._tags.splice(e,1):console.info('the value, "'+t+'" cannot be removed from the tags array, as it does not exist ')}},{key:"data",get:function(){var t=this.user,e=this.comments,n=this.tags,o=this.context;return(0,a.precleanData)(r({},t,{comments:e,tags:n,context:o}))}},{key:"user",get:function(){return this._user},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.email,o=t.avatar,r=t.name;this._user={customer_user_id:e,email:n,avatar:o,name:r}}},{key:"comments",get:function(){return this._comments},set:function(t){this._comments=t}},{key:"tags",get:function(){return this._tags},set:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._tags=[],e.forEach(function(e){t.addToTags(e)})}}]),e}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(1),u=n(0),a=(o=u)&&o.__esModule?o:{default:o};var c=function(t){function e(t,n,o,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return u.sourceId=t,u.content=n,u.user=o,u.parent=r,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"data",get:function(){var t=this.content,e=this.user,n=this.parent,o=this.context,r=this.sourceId;return(0,i.precleanData)({source_id:r,content:t,user:e,parent:n,context:o})}},{key:"sourceId",set:function(t){this._sourceId=t},get:function(){return this._sourceId}},{key:"content",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.contentType,o=t.content,r=t.timestamp;this._content={id:e,content_type:n,content:o,timestamp:r}},get:function(){return this._content}},{key:"parent",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.contentType,o=t.content,r=t.link,i=t.timestamp;this._parent={id:e,content_type:n,content:o,link:r,timestamp:i}},get:function(){return this._parent}},{key:"user",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.name,o=t.email,r=t.avatar;this._user={id:e,name:n,email:o,avatar:r}},get:function(){return this._user}}]),e}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xhr=new XMLHttpRequest}return r(t,[{key:"postJSON",value:function(t,e,n){var r=t.endpoint,i=t.clientId;return this.xhr.onreadystatechange=function(){4===this.readyState&&(this.status>=299?(console.error("failed to report content to bionic"),n&&n(this.responseText)):this.status>=200&&this.status<300&&n&&n(null))},this.xhr.open("POST",r,!0),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(JSON.stringify(o({},e,{client_id:i}))),this.xhr}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(4),a=(o=u)&&o.__esModule?o:{default:o};var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e||console.error("Please pass a client id when initializing BionicClient"),this.options=r({clientId:e},n),this.requester=new a.default}return i(t,[{key:"_flag",value:function(t,e,n){var o=r({},t.data,{report:e.data});return this.requester.postJSON(this.options,o,n)}},{key:"flagSync",value:function(t,e,n){return this._flag(t,e,n)}},{key:"flag",value:function(t,e){var n=this;return new Promise(function(o,r){return n._flag(t,e,function(t){t?r(t):o()})})}},{key:"clientId",set:function(t){this._options=r({},this._options,{clientId:t})}},{key:"options",set:function(t){var e=t.debug,n=void 0!==e&&e,o=t.clientId,r=t.endpoint,i=void 0===r?"https://stream.bionic-app.com/flags":r;this._options={debug:n,clientId:o,endpoint:i}},get:function(){return this._options}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FlaggedItem=e.Report=e.BionicClient=void 0;var o=u(n(5)),r=u(n(3)),i=u(n(2));function u(t){return t&&t.__esModule?t:{default:t}}e.BionicClient=o.default,e.Report=i.default,e.FlaggedItem=r.default}])});