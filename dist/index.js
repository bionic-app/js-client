!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.bionic=e():t.bionic=e()}(window,function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return a(t,[{key:"postJSON",value:function(t,e){return new Promise(function(n,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===this.readyState&&this.status>=299&&(this.status>=299?(console.error("failed to report content to bionic"),a(JSON.parse(this.responseText))):204===this.status&&n())},o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e))})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bionic=void 0;var a,o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),u=n(0),s=(a=u)&&a.__esModule?a:{default:a};var c=new(e.Bionic=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=Object.create(null),this._data=Object.create(null),this.requester=new s.default}return i(t,[{key:"addToMetadata",value:function(t,e){if(-1===["boolean","string","number"].indexOf(void 0===e?"undefined":r(e)))throw new Error("value in metadata must be a string, number, or boolean. "+(void 0===e?"undefined":r(e))+" not allowed");if(Object.keys(this._data.metadata).length>=10)throw new Error("metadata must not have more than 10 attributes");this._data.metadata[t]=e}},{key:"resetMetadata",value:function(){this._data.metadata={}}},{key:"removeFromMetadata",value:function(t){void 0!==this._data.metadata[t]?delete this._data.metadata[t]:console.info(t+" does not exist in metadata")}},{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._data=o({},this._data,{client_key:t,reporting_user:e,metadata:n}),this.settings=a}},{key:"flag",value:function(){return this.requester.postJSON(this.settings.endpoint,this.data)}},{key:"precleanData",value:function(t){var e=this,n={},a=Object.keys(t);return 0===a.length?t:(a.forEach(function(a){"object"===r(t[a])?n[a]=e.precleanData(t[a]):void 0!==t[a]&&(n[a]=t[a])}),n)}},{key:"clientKey",get:function(){return this._data.client_key}},{key:"settings",set:function(t){var e=t.debug,n=t.endpoint,a=void 0===n?"https://stream.bionic-app.com/flags":n;this._settings={debug:e,endpoint:a}},get:function(){return this._settings}},{key:"data",get:function(){return this.precleanData(this._data)}},{key:"content",set:function(t){var e=t.id,n=t.contentType,a=t.content,r=t.reporterComments;this._data=o({},this._data,{content:{id:e,content_type:n,content:a,reporter_comments:r}})}},{key:"categoryId",set:function(t){this._data=o({},this._data,{category_id:t})}},{key:"context",set:function(t){var e=t.id,n=t.content,a=t.link;this._data=o({},this._data,{context:{id:e,content:n,link:a}})}},{key:"reportingUser",set:function(t){var e=t.id,n=t.name,a=t.email,r=t.avatar;this._data=o({},this._data,{reporting_user:{id:e,name:n,email:a,avatar:r}})},get:function(){return this._data.reporting_user}},{key:"flaggedUser",set:function(t){var e=t.id,n=t.name,a=t.email,r=t.avatar;this._data=o({},this._data,{flagged_user:{id:e,name:n,email:a,avatar:r}})}},{key:"metadata",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(t).length>10)throw new Error("metadata must not have more than 10 attributes");for(var e in t)this.addToMetadata(e,t[e])},get:function(){return this._data.metadata}}]),t}());e.default=c}])});